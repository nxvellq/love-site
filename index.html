<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Love üíñ</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      min-height: 100vh;
      min-width: 100vw;
      box-sizing: border-box;
      margin: 0;
      background: linear-gradient(135deg, #ffd6e7, #ffeef5 80%);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    /* –°–≤–µ—á–µ–Ω–∏–µ –Ω–∞ —Ñ–æ–Ω–µ */
    body::before, body::after {
      content: "";
      position: absolute;
      z-index: 0;
      pointer-events: none;
    }
    body::before {
      left: 10%;
      top: 5%;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, #ffd6e7 60%, transparent 100%);
      filter: blur(40px);
      opacity: 0.4;
    }
    body::after {
      right: 10%;
      bottom: 8%;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, #ffb6d9 65%, transparent 100%);
      filter: blur(60px);
      opacity: 0.3;
    }

    .screen {
      position: absolute;
      left: 0; top: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;
      transition: opacity 0.5s;
    }
    .hidden {
      opacity: 0;
      pointer-events: none;
    }

    /*–ï–ù–í–ï–õ–û–ü*/
    .envelope-outer {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      min-width: 340px;
      min-height: 290px;
      perspective: 900px;
      background: none;
      z-index: 2;
    }
    .envelope {
      width: 280px;
      height: 190px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      background: none;
      z-index: 2;
    }
    .envelope-flap {
      width: 100%;
      height: 120px;
      background: #ff4c8b;
      position: absolute;
      top: 0; left: 0;
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      border-radius: 12px 12px 0 0;
      z-index: 4;
      transform-origin: top center;
      transition: transform 0.7s cubic-bezier(.55,1.8,.36,1) 0s;
      box-shadow: 0 12px 36px -8px #ff4c8ba2;
    }
    .envelope.opened .envelope-flap {
      transform: rotateX(-103deg);
      transition-delay: 0.07s;
    }

    .envelope-front {
      position: absolute;
      left: 0; top: 45px;
      width: 100%;
      height: 145px;
      background: #fff;
      border-radius: 0 0 15px 15px;
      z-index: 2;
      box-shadow: 0 7px 32px rgba(255,76,139,0.13);
      pointer-events: none;
    }
    .envelope-shadow {
      position: absolute;
      left: 0; top: 45px;
      width: 100%;
      height: 145px;
      background: linear-gradient(to bottom,transparent 60%,#ffb6d933 100%);
      border-radius: 0 0 16px 16px;
      z-index: 3;
      pointer-events: none;
      opacity: 0.45;
      mix-blend-mode: multiply;
    }

    .envelope-note {
      position: absolute;
      top: 44%;
      left: 50%;
      transform: translate(-50%, 0);
      font-size: 18px;
      color: #ff4c8b;
      font-family: 'Pacifico', cursive;
      opacity: 0.9;
      text-shadow: 0 0 7px #fff;
      transition: opacity 0.27s;
      pointer-events: none;
      user-select: none;
      z-index: 8;
    }
    .envelope.opened .envelope-note {
      opacity: 0;
      transition-delay: 0.13s;
    }

    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ (–±—É–º–∞–∂–∫–∞) */
    .envelope-letter {
      position: absolute;
      width: 234px;
      height: 108px;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%) translateY(50px) scaleY(0.7);
      border-radius: 15px 15px 20px 20px/16px 16px 20px 20px;
      background: #fff7fb;
      box-shadow: 0 10px 40px #f178a715;
      border: 2px solid #ffc5e9;
      color: #d23267;
      font-family: 'Pacifico',cursive;
      font-size: 22px;
      letter-spacing: .2px;
      text-align: center;
      padding-top: 24px;
      padding-bottom: 12px;
      opacity: 0;
      z-index: 5;
      transition:
        transform 0.67s cubic-bezier(.55,1.8,.36,1),
        opacity 0.37s cubic-bezier(.4,1.8,.75,1),
        box-shadow 0.22s;
      pointer-events: none;
    }
    .envelope.opened .envelope-letter {
      transform: translateX(-50%) translateY(0) scaleY(1.0);
      opacity: 1;
      transition-delay: 0.22s,0.22s,0s;
      pointer-events: auto;
    }

    .envelope-heart {
      position: absolute;
      left: 50%;
      top: 20px;
      transform: translateX(-50%);
      font-size: 32px;
      filter: drop-shadow(0 5px 12px #ff4c8b33);
      z-index: 16;
      pointer-events: none;
      opacity: 1;
      transition: opacity 0.23s;
    }
    .envelope.opened .envelope-heart { opacity: 0; }

    .envelope-button {
      opacity: 0;
      transition: opacity 0.4s 0.42s;
      text-align: center;
      margin-top: 14px;
      pointer-events: none;
    }
    .envelope.opened .envelope-button {
      opacity: 1;
      pointer-events: auto;
    }
    .envelope-button button {
      padding: 13px 34px;
      border: none;
      border-radius: 45px;
      cursor: pointer;
      font-size: 16px;
      background: #ff4c8b linear-gradient(90deg, #ff4c8b 85%, #ff90c2 100%);
      color: white;
      margin-top: 7px;
      margin-bottom: 10px;
      font-family: 'Montserrat', Arial, sans-serif;
      box-shadow: 0 4px 16px rgba(255, 76, 139, 0.14);
      transition: transform 0.21s;
    }
    .envelope-button button:hover {transform:scale(1.10); animation:heartbeat 0.8s;}
    @keyframes heartbeat {
      0%,100%{transform:scale(1);}
      22%{transform:scale(1.17);}
      47%{transform:scale(0.97);}
      67%{transform:scale(1.10);}
    }

    @media (max-width: 430px) {
      .envelope-outer{min-width: unset; width: 96vw;}
      .envelope{width:85vw; min-width:185px;max-width:360px;}
      .envelope-flap, .envelope-front, .envelope-shadow{height:42vw;min-height:64px;max-height:110px;}
      .envelope-letter{font-size:17px;width:85vw;max-width:214px;}
    }

    /* –û—Å—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∏–ª—å ‚Äî –º–æ–∂–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç —Å–≤–æ–µ–≥–æ –≤—Ç–æ—Ä–æ–≥o —ç–∫—Ä–∞–Ω–∞! */
    .bg-heart {position: absolute; bottom: -40px; font-size: 20px; animation: floatUp linear infinite; opacity: 0.7; pointer-events: none; z-index: 0;}
    @keyframes floatUp {
      from {transform: translateY(0); opacity: 0.7;}
      to {transform: translateY(-110vh); opacity: 0;}
    }
    .card {
      background: white;
      padding: 44px 30px 38px 30px;
      border-radius: 27px;
      box-shadow: 0 20px 50px rgba(255, 76, 139, 0.10), 0 2px 24px rgba(0,0,0,0.11);
      text-align: center;
      min-width: 290px;
      max-width: 90vw;
      max-width: 370px;
      opacity: 0;
      transform: translateY(35px) scale(0.97);
      animation: fade-in-card 1.1s 0.15s forwards;
    }
    .screen:not(.hidden) .card {animation: fade-in-card 1.1s 0.15s forwards;}
    @keyframes fade-in-card {
      from {opacity: 0; transform: translateY(35px) scale(0.97);}
      to {opacity: 1; transform: translateY(0) scale(1);}
    }
  </style>
</head>
<body>
  <!-- –ü–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω -->
  <div class="screen" id="s1">
    <div class="envelope-outer">
      <div class="envelope" id="envelope">
        <div class="envelope-flap"></div>
        <div class="envelope-front"></div>
        <div class="envelope-shadow"></div>
        <div class="envelope-heart">üíå</div>
        <div class="envelope-note">–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å</div>
        <div class="envelope-letter">
          <span style="color:#ff5797">–° –¥–Ω—ë–º –ª—é–±–≤–∏!</span><br>
          <span style="font-weight:normal; color:#b73a79;font-size:16px;">–¢—ã –≥–æ—Ç–æ–≤(a) —Ä–∞—Å–∫—Ä—ã—Ç—å<br> –º–æ—ë –ø–æ—Å–ª–∞–Ω–∏–µ?</span>
          <div class="envelope-button">
            <button class="pink" id="openBtn1" type="button">–î–∞–ª–µ–µ üíñ</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- –í—Ç–æ—Ä–æ–π —ç–∫—Ä–∞–Ω (–º–æ–∂–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–∏) -->
  <div class="screen hidden" id="s2">
    <div class="card">
      <h2>–•–æ—á–µ—à—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å?? üíñ</h2>
      <div class="circle">
        <img src="https://media.tenor.com/WlJsOVX2lysAAAAj/cat-tongue-cat.gif">
      </div>
      <button class="pink" id="openBtn2">–û—Ç–∫—Ä—ã—Ç—å üíñ</button>
      <button class="gray" id="noBtn">–ù–µ-–∞ üòà</button>
    </div>
  </div>
  <div class="screen hidden" id="s3">
    <div class="card">
      <h2>‚ù§Ô∏è –° –î–Ω—ë–º –°–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞! ‚ù§Ô∏è</h2>
      <div class="circle">
        <img src="https://media.tenor.com/W7lIFrltn54AAAAi/hello-kiyty-cute.gif">
      </div>
      <button class="pink" id="openBtn3" onclick="next(3)">–î–∞–ª–µ–µ!! ^w^</button>
    </div>
  </div>
  <div class="screen hidden" id="s4">
    <div class="card">
      <h2>–Ø —Ç–µ–±—è –ª—é–±–ª—é üíñ</h2>
      <p class="fadein-text" id="loveText">
        –¢—ã ‚Äî —Å–∞–º–æ–µ —Ç—ë–ø–ª–æ–µ –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ,<br>
        —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏.<br>
        –Ø –ø—Ä–∞–≤–¥–∞ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ —Ç–µ–±—è –ª—é–±–ª—é.<br>
        –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ç—ã –µ—Å—Ç—å ü•∫üíó
      </p>
    </div>
  </div>
  <script>
    // –ö—Ä–∞—Å–∏–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞
    const envelope = document.getElementById('envelope');
    const envelopeBtn = document.getElementById('openBtn1');
    let isEnvelopeOpened = false;

    envelope.addEventListener('click', function(e){
      if (isEnvelopeOpened) return;
      envelope.classList.add('opened');
      isEnvelopeOpened = true;
    });

    envelopeBtn.addEventListener('click', function(e){
      e.stopPropagation();
      explodeHearts(this);
      setTimeout(()=>next(1), 450);
    });

    // –°–µ—Ä–¥–µ—á–∫–∏
    const heartsArray = ["üíó", "üíñ", "üíò", "üíù", "‚ù§Ô∏è", "üíï", "üíû", "üíì"];
    function bgHeart() {
      const h = document.createElement("div");
      h.className = "bg-heart";
      h.innerHTML = heartsArray[Math.floor(Math.random() * heartsArray.length)];
      h.style.left = Math.random() * 100 + "vw";
      h.style.animationDuration = (6 + Math.random() * 5) + "s";
      h.style.fontSize = (16 + Math.random() * 23) + "px";
      h.style.opacity = 0.4 + Math.random() * 0.56;
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 12000);
    }
    setInterval(bgHeart, 460);

    // –≠–∫—Ä–∞–Ω—ã ‚Äî –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
    function next(n) {
      document.getElementById("s" + n).classList.add("hidden");
      document.getElementById("s" + (n + 1)).classList.remove("hidden");
      if (n + 1 === 4) showLoveText();
    }

    // –ö–Ω–æ–ø–∫–∞ "–Ω–µ-–∞ üòà"
    const noBtn = document.getElementById("noBtn");
    noBtn.addEventListener("mouseover", () => {
      const w = noBtn.offsetWidth, h = noBtn.offsetHeight;
      const maxX = window.innerWidth - w - 14, maxY = window.innerHeight - h - 14;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      noBtn.style.position = "fixed";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    });

    // –í–∑—Ä—ã–≤ —Å–µ—Ä–¥–µ—á–µ–∫
    function explodeHearts(el) {
      const rect = el.getBoundingClientRect();
      const cx = rect.left + rect.width / 2;
      const cy = rect.top + rect.height / 2;
      for (let i = 0; i < 28; i++) {
        const heart = document.createElement("div");
        heart.className = "bg-heart";
        heart.innerHTML = heartsArray[Math.floor(Math.random() * heartsArray.length)];
        heart.style.left = cx + "px";
        heart.style.top = cy + "px";
        const angle = Math.random() * 2 * Math.PI;
        const dist = 60 + Math.random() * 120;
        heart.style.setProperty("--x", Math.cos(angle) * dist + "px");
        heart.style.setProperty("--y", Math.sin(angle) * dist + "px");
        heart.style.animation = `explode 0.9s forwards cubic-bezier(0.55,1,0.63,0.99)`;
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 900);
      }
    }

    // –í–∑—Ä—ã–≤ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–∫–∞—Ö
    document.getElementById("openBtn2").addEventListener("click", function() {
      explodeHearts(this);
      next(2);
    });
    document.getElementById("openBtn3").addEventListener("click", function() {
      explodeHearts(this);
      next(3);
    });

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —ç–∫—Ä–∞–Ω–µ
    function showLoveText() {
      const el = document.getElementById("loveText");
      el.style.opacity = 0;
      let fullText = el.innerHTML;
      el.innerHTML = "";
      let i = 0, print = "";
      (function printLetter() {
        if (i < fullText.length) {
          print += fullText[i];
          el.innerHTML = print;
          el.style.opacity = 1;
          i++;
          setTimeout(printLetter, fullText[i - 1] === '<' ? 5 : 26);
        }
      })();
    }
    // –í–∑—Ä—ã–≤ —Å–µ—Ä–¥–µ—á–µ–∫ (animation)
    document.head.insertAdjacentHTML('beforeend', `<style>
      @keyframes explode {
        from {
          opacity: 1;
          transform: translate(0, 0) scale(1);
        }
        to {
          opacity: 0;
          transform: translate(var(--x,0), var(--y,0)) scale(1.8);
        }
      }
    </style>`);
  </script>
</body>
</html>
